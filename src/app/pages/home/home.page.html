<ion-content class="home-content" fullscreen="true">
  <!-- Pull to Refresh -->
  <ion-refresher slot="fixed" (ionRefresh)="refreshData($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Header con título -->
  <div class="page-header">
    <h1 class="page-title">Historial Semanal</h1>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="content-wrapper">
    <div class="chart-card">
      <div class="loading-shimmer" style="height: 250px;"></div>
    </div>
    <div class="sensors-grid-compact">
      <div class="sensor-card-compact" *ngFor="let i of [1,2,3,4]">
        <div class="loading-shimmer" style="height: 80px;"></div>
      </div>
    </div>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!isLoading" class="content-wrapper">
    <!-- Tarjeta de gráfico grande -->
    <div class="chart-card">
      <div class="chart-placeholder">
        <!-- Aquí irá tu gráfico -->
        <p class="chart-text">Imagen de la planta</p>
      </div>
    </div>



    <!-- Grid compacto de sensores (2x2) -->
    <div class="sensors-grid-compact">
      <!-- Temperatura -->
      <div class="sensor-card-compact">
        <div class="sensor-header-compact">
          <img src="assets/icon/temperatura.png" class="sensor-icon-compact" alt="Temperatura">
          <span class="sensor-title-compact">Temperatura</span>
        </div>
        <div class="sensor-value-compact">{{ data.temp | number:'1.1-1' }}°C</div>
        <div class="sensor-status-compact" [ngClass]="getSensorStatus('temp')">
          {{ getSensorStatusText('temp') }}
        </div>
      </div>

      <!-- Humedad -->
      <div class="sensor-card-compact">
        <div class="sensor-header-compact">
          <img src="assets/icon/humedad.png" class="sensor-icon-compact" alt="Humedad">
          <span class="sensor-title-compact">Humedad</span>
        </div>
        <div class="sensor-value-compact">{{ data.hum | number:'1.0-0' }}%</div>
        <div class="sensor-status-compact" [ngClass]="getSensorStatus('hum')">
          {{ getSensorStatusText('hum') }}
        </div>
      </div>

      <!-- Luz -->
      <div class="sensor-card-compact">
        <div class="sensor-header-compact">
          <img src="assets/icon/luz.png" class="sensor-icon-compact" alt="Luz">
          <span class="sensor-title-compact">Luz</span>
        </div>
        <div class="sensor-value-compact">{{ data.light | number:'1.0-0' }}%</div>
        <div class="sensor-status-compact" [ngClass]="getSensorStatus('light')">
          {{ getSensorStatusText('light') }}
        </div>
      </div>

      <!-- Nivel de Agua -->
      <div class="sensor-card-compact">
        <div class="sensor-header-compact">
          <img src="assets/icon/agua.png" class="sensor-icon-compact" alt="Agua">
          <span class="sensor-title-compact">Nivel de Agua</span>
        </div>
        <div class="sensor-value-compact">{{ data.water | number:'1.0-0' }}%</div>
        <div class="sensor-status-compact" [ngClass]="getSensorStatus('water')">
          {{ getSensorStatusText('water') }}
        </div>
      </div>
    </div>

    <!-- Tarjeta de Sistema de Riego -->
    <div class="irrigation-card-compact">
      <div class="irrigation-content">
        <div class="irrigation-text">
          <div class="irrigation-label">Sistema de Riego</div>
          <div class="irrigation-mode">Automático</div>
        </div>
        <img src="assets/icon/sistema.png" class="leaf-icon" alt="Sistema">
      </div>
    </div>

    <!-- Botón Historial -->
    <ion-button expand="block" class="history-button" (click)="goHistory()">
      Ver Historial Completo
    </ion-button>
  </div>
</ion-content>

